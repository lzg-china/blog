import{_ as s,c as i,o as a,a1 as n}from"./chunks/framework.DYSeicsv.js";const t="/blog/assets/build_picture_2.DVJ4n_Gt.png",u=JSON.parse('{"title":"小兔鲜儿 - 项目打包","description":"","frontmatter":{},"headers":[],"relativePath":"guide/rabbit-shop/publish.md","filePath":"guide/rabbit-shop/publish.md"}'),l={name:"guide/rabbit-shop/publish.md"},p=n('<h1 id="小兔鲜儿-项目打包" tabindex="-1">小兔鲜儿 - 项目打包 <a class="header-anchor" href="#小兔鲜儿-项目打包" aria-label="Permalink to &quot;小兔鲜儿 - 项目打包&quot;">​</a></h1><h2 id="微信小程序端" tabindex="-1">微信小程序端 <a class="header-anchor" href="#微信小程序端" aria-label="Permalink to &quot;微信小程序端&quot;">​</a></h2><p>把当前 uni-app 项目打包成微信小程序端，并发布上线。</p><h3 id="核心步骤" tabindex="-1">核心步骤 <a class="header-anchor" href="#核心步骤" aria-label="Permalink to &quot;核心步骤&quot;">​</a></h3><ol><li>运行打包命令 <code>pnpm build:mp-weixin</code></li><li>预览和测试，微信开发者工具导入生成的 <code>/dist/build/mp-weixin</code> 目录</li><li>上传小程序代码</li><li>提交审核和发布</li></ol><h3 id="步骤图示" tabindex="-1">步骤图示 <a class="header-anchor" href="#步骤图示" aria-label="Permalink to &quot;步骤图示&quot;">​</a></h3><p>项目打包上线需要使用到多个工具，注意工具之间的职责。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VSCode</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ----</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 微信开发者工具</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ----</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 微信公众平台</span></span></code></pre></div><p>了解：开发者可独立使用 <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/ci.html" target="_blank" rel="noreferrer">miniprogram-ci</a> 进行小程序代码的上传等操作!</p><div class="tip custom-block"><p class="custom-block-title">举一反三</p><p>打包成其他小程序端的步骤类似，只是更换了 <strong>打包命令</strong> 和 <strong>开发者工具</strong> 。</p></div><h2 id="条件编译" tabindex="-1">条件编译 <a class="header-anchor" href="#条件编译" aria-label="Permalink to &quot;条件编译&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">常见问题</p><p>Q：按照 uni-app 规范开发可保证多平台兼容，但每个平台有自己的一些特性，该如何处理？</p><p>A：通过 <a href="https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor" target="_blank" rel="noreferrer">条件编译</a>，让代码按条件编译到指定平台。</p></div><p><img src="'+t+`" alt="多端登录"></p><p><strong>网页端不支持微信平台授权登录等功能</strong>，可通过 <a href="https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor" target="_blank" rel="noreferrer">条件编译</a>，实现不同端渲染不同的登录界面。</p><h3 id="条件编译语法" tabindex="-1">条件编译语法 <a class="header-anchor" href="#条件编译语法" aria-label="Permalink to &quot;条件编译语法&quot;">​</a></h3><p>通过特殊注释，以 <strong><code>#ifdef</code></strong> 或 <strong><code>#ifndef</code></strong> 加 <strong>平台名称</strong> 开头，以 <strong><code>#endif</code></strong> 结尾。</p><p>条件编译支持: vue, ts, js, scss, css, pages.json 等文件。</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 微信平台特有API，需要条件编译</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// #ifdef MP-WEIXIN</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestPayment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// #endif</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- 微信开发能力按钮，需要条件编译 --&gt;</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- #ifdef MP-WEIXIN --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openSetting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;授权管理&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;feedback&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;问题反馈&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;contact&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;联系我们&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- #endif --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 如果出现样式兼容，也可添加条件编译 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page {</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* #ifdef H5 */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  background-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* #endif */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>了解：<code>#ifdef H5 || MP-WEIXIN</code> 表示在 H5 平台 <strong>或</strong> 微信小程序平台存在的代码。</p><div class="tip custom-block"><p class="custom-block-title">开发技巧</p><p>可通过搜索 <code>wx.</code> 和 <code>open-type</code> 等平台关键词，快速查找需要添加编译模式的代码。</p></div><h2 id="打包为-h5-端" tabindex="-1">打包为 H5 端 <a class="header-anchor" href="#打包为-h5-端" aria-label="Permalink to &quot;打包为 H5 端&quot;">​</a></h2><p>把当前 uni-app 项目打包成网页(H5)端，并配置路由基础路径。</p><h3 id="核心步骤-1" tabindex="-1">核心步骤 <a class="header-anchor" href="#核心步骤-1" aria-label="Permalink to &quot;核心步骤&quot;">​</a></h3><ol><li>运行打包命令 <code>pnpm build:h5</code></li><li>预览和测试，使用浏览器打开 <code>/dist/build/h5</code> 目录下的 <code>index.html</code> 文件</li><li>由运维部署到服务器</li></ol><h3 id="路由基础路径" tabindex="-1">路由基础路径 <a class="header-anchor" href="#路由基础路径" aria-label="Permalink to &quot;路由基础路径&quot;">​</a></h3><p>默认的路由基础路径为 <code>/</code> 根路径，部分网站并不是部署到根路径，需要按运维要求调整。</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// manifest.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* 网页端特有配置 */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;h5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;router&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 基础路径：./ 为相对路径</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;base&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 小程序特有相关 */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mp-weixin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // …省略</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;vueVersion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="打包为-app-端" tabindex="-1">打包为 APP 端 <a class="header-anchor" href="#打包为-app-端" aria-label="Permalink to &quot;打包为 APP 端&quot;">​</a></h2><p><a href="https://uniapp.dcloud.net.cn/tutorial/run/run-app.html" target="_blank" rel="noreferrer">App 端</a> 的打包，预览、测试、发行，使用 <code>HBuilderX</code> 工具。</p>`,29),h=[p];function e(k,r,d,o,E,g){return a(),i("div",null,h)}const y=s(l,[["render",e]]);export{u as __pageData,y as default};
